#!/usr/bin/env bash

if [[ $# -eq 1 ]]; then
    selected=$1
else
  selected=$((echo ~/dotfiles/ && find ~/dev/catho/ ~/dev/ -mindepth 1 -maxdepth 1 -type d) | fzf)
fi
if [[ -z $selected ]]; then
    exit 0
fi
selected_name=$(basename "$selected" | tr . _)
# tmux_running=$(pgrep zellij)
#
# if [[ -z $TMUX ]] && [[ -z $tmux_running ]]; then
#     tmux new-session -s $selected_name -c $selected
#     exit 0
# fi
ZELLIJ_SESSIONS=$(zellij list-sessions)
NO_SESSIONS=$(echo "${ZELLIJ_SESSIONS}" | wc -l)
if [ "${NO_SESSIONS}" -le 4 ]; then
  cd $selected
  zellij attach -c $selected_name
fi
